{"version":3,"sources":["webpack://ringcentral-engage-voice-embeddable-mobile/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://ringcentral-engage-voice-embeddable-mobile/webpack/bootstrap","webpack://ringcentral-engage-voice-embeddable-mobile/webpack/runtime/compat get default export","webpack://ringcentral-engage-voice-embeddable-mobile/webpack/runtime/define property getters","webpack://ringcentral-engage-voice-embeddable-mobile/webpack/runtime/hasOwnProperty shorthand","webpack://ringcentral-engage-voice-embeddable-mobile/external \"React\"","webpack://ringcentral-engage-voice-embeddable-mobile/external \"ReactDOM\"","webpack://ringcentral-engage-voice-embeddable-mobile/./src/client/components/index/index.jsx","webpack://ringcentral-engage-voice-embeddable-mobile/./src/client/index.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","module","exports","App","Component","loggedIn","fetchingUser","loginning","reg","arr","window","location","search","match","c","getCodeFromUrl","document","querySelector","contentWindow","postMessage","type","callbackUri","rc","permissions","cordova","plugins","list","CAPTURE_AUDIO_OUTPUT","RECORD_AUDIO","hasPermission","status","requestPermissions","console","log","e","open","InAppBrowser","addEventListener","onEvent","data","debug","oAuthUri","href","getUrl","login","authUrlDefaultRc","componentDidMount","initEvent","requirePermissions","render","url","appConfigQuery","renderReactDom","ReactDOM","getElementById"],"mappings":"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","file":"js/app.bundle.js","sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","const __WEBPACK_NAMESPACE_OBJECT__ = React;","const __WEBPACK_NAMESPACE_OBJECT__ = ReactDOM;","import { Component } from 'react'\n\nexport default class App extends Component {\n  state = {\n    loggedIn: false,\n    fetchingUser: false,\n    loginning: false\n  }\n\n  componentDidMount () {\n    this.initEvent()\n    this.requirePermissions()\n  }\n\n  getCodeFromUrl = () => {\n    const reg = /c=([\\w\\d_\\-]+)/\n    const arr = window.location.search.match(reg)\n    return arr ? arr[1] : ''\n  }\n\n  login = () => {\n    const c = this.getCodeFromUrl()\n    if (c) {\n      document.querySelector('#rc-widget-adapter-frame').contentWindow.postMessage({\n        type: 'rc-ev-authorization-code',\n        callbackUri: `${window.rc.callbackUri}?code=${c}`\n      }, '*')\n    }\n  }\n\n  requirePermissions = () => {\n    try {\n      const { permissions } = cordova.plugins\n      const list = [\n        permissions.CAPTURE_AUDIO_OUTPUT,\n        permissions.RECORD_AUDIO\n      ]\n      permissions.hasPermission(list, (status) => {\n        if (!status.hasPermission) {\n          permissions.requestPermissions(\n            list,\n            (status) => {\n              if (!status.hasPermission) {\n                console.log('set permission failed')\n              }\n            },\n            console.log\n          )\n        }\n      }, null)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  initEvent = () => {\n    if (typeof cordova !== 'undefined') {\n      window.open = cordova.InAppBrowser.open\n    }\n    window.addEventListener('message', this.onEvent)\n  }\n\n  onEvent = e => {\n    const { data } = e\n    console.debug('got data from ev', data)\n    if (data) {\n      switch (data.type) {\n        case 'rc-ev-loginPopup':\n          // get login oAuthUri from widget\n          console.log('rc-ev-loginPopup:', data.oAuthUri)\n          window.location.href = this.getUrl()\n          //  window.open(data.oAuthUri); // open oauth uri to login\n          break\n        case 'rc-ev-init':\n          this.login()\n          break\n        default:\n          break\n      }\n    }\n  }\n\n  getUrl = () => {\n    return window.rc.authUrlDefaultRc\n  }\n\n  render () {\n    const url = 'https://ringcentral.github.io/engage-voice-embeddable/app.html' + window.rc.appConfigQuery\n    return (\n      <div id='app'>\n        <iframe\n          id='rc-widget-adapter-frame'\n          src={url}\n          sandbox='allow-same-origin allow-scripts allow-forms allow-popups'\n          allow='microphone'\n        />\n      </div>\n    )\n  }\n}\n","/**\n * entry file for install page\n */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/index/index.jsx'\nimport './css/index.styl'\n\nconst renderReactDom = () => {\n  ReactDOM.render(<App />, document.getElementById('container'))\n}\n\nif (window.cordova) {\n  document.addEventListener('deviceready', () => {\n    renderReactDom()\n  }, false)\n} else {\n  renderReactDom()\n}\n"],"sourceRoot":""}